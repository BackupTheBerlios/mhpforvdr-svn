###
### Adapt these paths to your system
###

##Location of the VDR directory
VDRDIR = ../../..

##Base directory for files installed by this plugin.
##See hierarchy chart below
##You need to recompile for your changes to take effect!
BASEDIR    = /usr/local/vdr

##The directory prefix of DirectFB. 
##This is usually "/usr/local" if you compiled from source,
##or "/usr" if you installed a package from your distributor.
##DIRECTFB_ROOT = /usr/local
DIRECTFB_ROOT = /usr/

##The directory prefix of DFB++. 
##This is usually "/usr/local" if you compiled from source,
##or "/usr" if you installed a package from your distributor.
DFB++_ROOT = /usr/local

##The root directory of SableVM
##If you have the directories "/usr/lib/sablevm"
##and "/usr/lib/sablevm-classpath", the root is "/usr".
##If SableVM-Classpath is in a different directory,
##you may specifiy a different SABLEVM_CLASSPATH_ROOT
SABLEVM_ROOT = /usr/local
##SABLEVM_CLASSPATH_ROOT = /usr

##The root directory of Kaffe.
##This is usually "/usr/local/kaffe" if you compiled from source,
##or "/usr/kaffe" or something like "/opt/kaffe-1.1.4" if you
##installed a package from your distributor. 
KAFFE_DIR = /usr/local/kaffe
##KAFFE_DIR = /opt/kaffe-1.1.4

###
###
###
###

##you normally do not need to edit anything below


### The C compiler and options:

CC       ?= gcc
CFLAGS   ?= -g -O2

CXX      ?= g++
CXXFLAGS ?= -g -O2 -Wall -Woverloaded-virtual -fPIC

AR = ar
ARFLAGS = ru
RANLIB = ranlib


VDRDIR_RELATIVE = $(VDRDIR)/include/
PLUGINDIR_RELATIVE = ./

### Variables for plugin Makefile

##Defaults from VDRs Make.config
PLUGINDIR= ./PLUGINS
PLUGINLIBDIR= $(PLUGINDIR)/lib
DVBDIR = ../DVB
##if there is a VDR Make.config, include it
-include $(VDRDIR)/Make.config
##now construct variables for the plugin Makefile
LIBDIR = $(VDRDIR)/$(PLUGINLIBDIR)
temp_DVBDIR := $(DVBDIR)
DVBDIR = $(VDRDIR)/$(temp_DVBDIR)


### Installation directories

##This is the default directory tree needed:
##/usr/local/vdr _
##               |- /apps
##               |- /mhp _
##                        |- /lib
##                        |- /bin
##                        |- /data _
##                                  |- /fonts
##                        |- /jar
##


MHPDIR     = $(BASEDIR)/mhp

MHPLIBDIR  = $(MHPDIR)/lib
MHPBINDIR  = $(MHPDIR)/bin
MHPDATADIR = $(MHPDIR)/data
MHPJARDIR  = $(MHPDIR)/jar
MHPJARFILENAME = mhp.jar
MHPJARFILE = $(MHPJARDIR)/$(MHPJARFILENAME)
MHPFONTDIR = $(MHPDATADIR)/fonts

##this is the only directory here which can be changed by a command line option
LOCALAPPSDIR = $(BASEDIR)/apps

### DirectFB and DFB++ directories

DIRECTFB_LIBS = -ldirectfb
DIRECTFB_INCLUDES = $(DIRECTFB_ROOT)/include/directfb
DFB++_INCLUDES = $(DFB++_ROOT)/include/dfb++
DIRECTFB_INCLUDES_INTERNAL = $(DIRECTFB_ROOT)/include/directfb-internal
DIRECTFB_VERSION = $(shell $(DIRECTFB_ROOT)/bin/directfb-config --version)

### Kaffe directories

KAFFE_LIB  = $(KAFFE_DIR)/jre/lib
KAFFE_NATIVE = $(KAFFE_LIB)/i386
KAFFE_INCLUDES = $(KAFFE_DIR)/include
KAFFE_INCLUDES2 = $(KAFFE_DIR)/include/kaffe

### SableVM directories

SABLEVM_CLASSPATH_ROOT ?= $(SABLEVM_ROOT)
SABLEVM_DIR = $(SABLEVM_ROOT)/lib/sablevm
SABLEVM_SODIR = $(SABLEVM_ROOT)/lib
SABLEVM_INCLUDES = $(SABLEVM_DIR)/include
SABLEVM_NATIVE = $(SABLEVM_CLASSPATH_ROOT)/lib/sablevm-classpath
SABLEVM_LIB = $(SABLEVM_CLASSPATH_ROOT)/share/sablevm-classpath


### Java constants

##The virtual machine: "kaffe" or "sablevm".
##But "kaffe" is currently broken
##Move this to the top of this file
##as soon as there is real choice.
VM = sablevm

ifeq ($(VM),kaffe)

VM_INCLUDE_OPTIONS = -I$(KAFFE_INCLUDES) -I$(KAFFE_INCLUDES2)

VM_DEFINES = -DKAFFE_DIR=\"$(KAFFE_DIR)\" -DKAFFE_LIB=\"$(KAFFE_LIB)\" \
             -DKAFFE_NATIVE=\"$(KAFFE_NATIVE)\"
##use this to hardcode the path to kaffe libs in the dynamic lib
VM_LINK_PATH = -Wl,--rpath=$(KAFFE_NATIVE) -L$(KAFFE_NATIVE) -lkaffevm 
VM_CLASSPATH = $(KAFFE_LIB)/rt.jar

else 
ifeq ($(VM),sablevm)

##VM_INCLUDES = -I$(SABLEVM_INCLUDES)
VM_INCLUDE_OPTIONS = -DSABLEVM_JNI
VM_DEFINES = -DSABLEVM_SODIR=\"$(SABLEVM_SODIR)\" -DSABLEVM_NATIVE=\"$(SABLEVM_NATIVE)\" \
             -DSABLEVM_LIB=\"$(SABLEVM_LIB)\"
VM_LINK_PATH = -L$(SABLEVM_SODIR) -lsablevm
VM_CLASSPATH = $(SABLEVM_LIB)/libclasspath.jar:$(SABLEVM_LIB)/resources.jar

endif
endif

## EXTRA_CLASSPATH_SEPARATOR can be set as necessary
## See mhp/java/Makefile how to use this variable, with :=
EXTRA_CLASSPATH = $(EXTRA_CLASSPATH_PREFIX)/jmf.jar$(EXTRA_CLASSPATH_SEPARATOR)$(EXTRA_CLASSPATH_PREFIX)/asm-2.0.jar
## Default values, to be adapted as needed.
EXTRA_CLASSPATH_PREFIX = .
EXTRA_CLASSPATH_SEPARATOR = :
